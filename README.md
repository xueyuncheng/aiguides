# aiguides

ä¸€ä¸ªåŸºäº Google ADK (Agent Development Kit) æ„å»ºçš„ AI åŠ©æ‰‹æ¡†æ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ—‚ï¸ ä¼šè¯ç®¡ç†ç³»ç»Ÿ
å®Œæ•´çš„ç”¨æˆ·ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼š
- **è‡ªåŠ¨ä¿å­˜ä¼šè¯**ï¼šæ‰€æœ‰å¯¹è¯ä¼šè¯è‡ªåŠ¨ä¿å­˜åˆ° SQLite æ•°æ®åº“
- **å†å²è®°å½•**ï¼šå¯ä»¥æŸ¥çœ‹å’Œæ¢å¤ä¹‹å‰çš„å¯¹è¯å†å²
- **ä¼šè¯åˆ‡æ¢**ï¼šåœ¨ä¾§è¾¹æ å¿«é€Ÿåˆ‡æ¢ä¸åŒçš„ä¼šè¯
- **ä¼šè¯åˆ é™¤**ï¼šæ”¯æŒåˆ é™¤ä¸éœ€è¦çš„ä¼šè¯
- **å®æ—¶æ›´æ–°**ï¼šä¼šè¯åˆ—è¡¨æ˜¾ç¤ºæœ€æ–°æ¶ˆæ¯å’Œæ—¶é—´æˆ³
- **å–æ¶ˆè¯·æ±‚**ï¼šå‘é€æ¶ˆæ¯åå¯ä»¥éšæ—¶å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„è¯·æ±‚

### AI Assistantï¼ˆä¿¡æ¯æ£€ç´¢ã€äº‹å®æ ¸æŸ¥å’Œå›¾ç‰‡ç”Ÿæˆï¼‰
ä¸“é—¨ç”¨äºä¿¡æ¯æ£€ç´¢ã€äº‹å®æ ¸æŸ¥å’Œå›¾ç‰‡ç”Ÿæˆçš„é€šç”¨ AI åŠ©æ‰‹ï¼š
- **SearchAgent**ï¼šä¸“ä¸šçš„ä¿¡æ¯æ£€ç´¢åŠ©æ‰‹ï¼Œä½¿ç”¨ google_search å·¥å…·è·å–å‡†ç¡®ã€å…¨é¢çš„ä¿¡æ¯
- **å›¾ç‰‡ç”Ÿæˆ**ï¼šå½“ç”¨æˆ·æ˜ç¡®è¦æ±‚ç”Ÿæˆå›¾ç‰‡æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨å›¾ç‰‡ç”Ÿæˆå·¥å…·åˆ›å»ºé«˜è´¨é‡å›¾ç‰‡
- **æ™ºèƒ½åˆ‡æ¢**ï¼šæ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åŠŸèƒ½ï¼ˆæœç´¢æˆ–å›¾ç‰‡ç”Ÿæˆï¼‰
- **å¤šåŠŸèƒ½ä¸€ä½“**ï¼šåœ¨ä¸€ä¸ªå¯¹è¯ä¸­å®Œæˆæ‰€æœ‰ä»»åŠ¡

**å›¾ç‰‡ç”ŸæˆåŠŸèƒ½ï¼š**
- ä½¿ç”¨ Google Imagen 3 æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡
- æ”¯æŒå¤šç§å®½é«˜æ¯”ï¼š1:1ï¼ˆæ­£æ–¹å½¢ï¼‰ã€3:4ï¼ˆç«–å±ï¼‰ã€4:3ï¼ˆæ¨ªå±ï¼‰ã€9:16ï¼ˆæ‰‹æœºç«–å±ï¼‰ã€16:9ï¼ˆå®½å±ï¼‰
- å¯ä¸€æ¬¡ç”Ÿæˆ 1-4 å¼ å›¾ç‰‡
- æ”¯æŒæŒ‡å®šä¸æƒ³å‡ºç°çš„å†…å®¹ï¼ˆnegative promptï¼‰
- æ”¯æŒå¤šç§è‰ºæœ¯é£æ ¼ï¼šå†™å®ã€å¡é€šã€æ²¹ç”»ã€æ°´å½©ç­‰


## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Go 1.25.5 æˆ–æ›´é«˜ç‰ˆæœ¬
- Google Gemini API Key
- Node.js 20+ å’Œ npmï¼ˆç”¨äºå‰ç«¯ç•Œé¢ï¼‰

### ä¸€é”®å¯åŠ¨ ğŸš€ï¼ˆæ¨èï¼‰

1. å…‹éš†é¡¹ç›®ï¼š
```bash
git clone https://github.com/xueyuncheng/aiguides.git
cd aiguides
```

2. é…ç½® API Keyï¼š
ç¼–è¾‘ `cmd/aiguide/aiguide.yaml` æ–‡ä»¶ï¼Œè®¾ç½®ä½ çš„ Google Gemini API Keyï¼š
```yaml
api_key: your_api_key_here
model_name: gemini-2.0-flash-exp
use_gin: true        # ä½¿ç”¨ Gin æ¡†æ¶æä¾› REST API
gin_port: 8080       # API æœåŠ¡ç«¯å£
```

**é…ç½®è¯´æ˜ï¼š**
- `api_key`: Google Gemini API Keyï¼ˆå¿…éœ€ï¼‰
- `model_name`: ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º gemini-2.0-flash-expï¼‰
- `use_gin`: æ˜¯å¦ä½¿ç”¨ Gin æ¡†æ¶ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º falseï¼‰
  - `true`: ä½¿ç”¨ Gin æ¡†æ¶æä¾› REST APIï¼Œé€‚åˆä¸å‰ç«¯é…åˆä½¿ç”¨
  - `false`: ä½¿ç”¨ ADK å†…ç½®çš„ Web UI å’Œ API
- `gin_port`: Gin æœåŠ¡å™¨ç«¯å£ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º 8080ï¼‰

3. ä½¿ç”¨å¯åŠ¨è„šæœ¬åŒæ—¶å¯åŠ¨åç«¯å’Œå‰ç«¯ï¼š
```bash
./scripts/start.sh
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆå¦‚æœè¿˜æœªå®‰è£…ï¼‰
- å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 8080ï¼‰
- å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆç«¯å£ 3000ï¼‰

4. è®¿é—®åº”ç”¨ï¼š
æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## Google ç™»å½•é…ç½® ğŸ” (å¯é€‰)

æœ¬é¡¹ç›®æ”¯æŒ Google OAuth 2.0 ç™»å½•ï¼Œä¸ºæ‚¨çš„ AI åŠ©æ‰‹æœåŠ¡æ·»åŠ ç”¨æˆ·è®¤è¯å’ŒæˆæƒåŠŸèƒ½ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦ Google ç™»å½•ï¼Ÿ

- **ç”¨æˆ·èº«ä»½ç®¡ç†**ï¼šä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ç‹¬ç«‹çš„ä¼šè¯å’Œæ•°æ®
- **è®¿é—®æ§åˆ¶**ï¼šä¿æŠ¤æ‚¨çš„ AI åŠ©æ‰‹æœåŠ¡ï¼Œä»…æˆæƒç”¨æˆ·å¯è®¿é—®
- **ä¸ªæ€§åŒ–ä½“éªŒ**ï¼šåŸºäºç”¨æˆ·èº«ä»½æä¾›å®šåˆ¶åŒ–çš„æœåŠ¡

### é…ç½®æ­¥éª¤

#### 1. åˆ›å»º Google OAuth å‡­æ®

1. è®¿é—® [Google Cloud Console](https://console.cloud.google.com/)
2. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
3. å¯ç”¨ **Google+ API**ï¼š
   - å¯¼èˆªåˆ° "API å’ŒæœåŠ¡" > "åº“"
   - æœç´¢ "Google+ API" å¹¶å¯ç”¨

4. åˆ›å»º OAuth 2.0 å‡­æ®ï¼š
   - å¯¼èˆªåˆ° "API å’ŒæœåŠ¡" > "å‡­æ®"
   - ç‚¹å‡» "åˆ›å»ºå‡­æ®" > "OAuth å®¢æˆ·ç«¯ ID"
   - é€‰æ‹©åº”ç”¨ç±»å‹ï¼š**Web åº”ç”¨**
   - è®¾ç½®åç§°ï¼ˆä¾‹å¦‚ï¼šAIGuideï¼‰
   - æ·»åŠ æˆæƒçš„é‡å®šå‘ URIï¼š
     ```
     http://localhost:8080/auth/google/callback
     ```
   - å¦‚æœéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè¿˜éœ€æ·»åŠ ç”Ÿäº§ç¯å¢ƒçš„å›è°ƒ URLï¼š
     ```
     https://yourdomain.com/auth/google/callback
     ```

5. ä¿å­˜åè·å– **å®¢æˆ·ç«¯ ID** å’Œ **å®¢æˆ·ç«¯å¯†é’¥**

#### 2. é…ç½®åç«¯

ç¼–è¾‘ `cmd/aiguide/aiguide.yaml` æ–‡ä»¶ï¼Œæ·»åŠ  Google OAuth é…ç½®ï¼š

```yaml
api_key: your_gemini_api_key_here
model_name: gemini-2.0-flash-exp
use_gin: true
gin_port: 8080

# å¯ç”¨ Google ç™»å½•è®¤è¯
enable_authentication: true
google_client_id: YOUR_GOOGLE_CLIENT_ID
google_client_secret: YOUR_GOOGLE_CLIENT_SECRET
google_redirect_url: http://localhost:8080/auth/google/callback
jwt_secret: your_random_jwt_secret_here  # å»ºè®®ä½¿ç”¨ 32 å­—ç¬¦ä»¥ä¸Šçš„éšæœºå­—ç¬¦ä¸²
```

**é…ç½®è¯´æ˜ï¼š**

- `enable_authentication`: è®¾ç½®ä¸º `true` å¯ç”¨è®¤è¯åŠŸèƒ½
- `google_client_id`: ä» Google Cloud Console è·å–çš„å®¢æˆ·ç«¯ ID
- `google_client_secret`: ä» Google Cloud Console è·å–çš„å®¢æˆ·ç«¯å¯†é’¥
- `google_redirect_url`: OAuth å›è°ƒ URLï¼Œéœ€ä¸ Google Console ä¸­é…ç½®çš„ä¸€è‡´
- `jwt_secret`: ç”¨äºç­¾å JWT token çš„å¯†é’¥ï¼Œå»ºè®®ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²

**ç”Ÿæˆ JWT Secret ç¤ºä¾‹ï¼š**

```bash
# ä½¿ç”¨ openssl ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
openssl rand -base64 32

# æˆ–ä½¿ç”¨ Python
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

#### 3. å¯åŠ¨æœåŠ¡

ä½¿ç”¨å¯åŠ¨è„šæœ¬å¯åŠ¨æœåŠ¡ï¼š

```bash
./scripts/start.sh
```

æˆ–æ‰‹åŠ¨å¯åŠ¨åç«¯å’Œå‰ç«¯ï¼š

```bash
# å¯åŠ¨åç«¯
go run cmd/aiguide/aiguide.go -f cmd/aiguide/aiguide.yaml

# åœ¨æ–°ç»ˆç«¯å¯åŠ¨å‰ç«¯
cd frontend && npm run dev
```

#### 4. ä½¿ç”¨ Google ç™»å½•

1. è®¿é—® [http://localhost:3000](http://localhost:3000)
2. å¦‚æœå¯ç”¨äº†è®¤è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
3. ç‚¹å‡» "ä½¿ç”¨ Google ç™»å½•" æŒ‰é’®
4. åœ¨ Google æˆæƒé¡µé¢å®Œæˆç™»å½•
5. æˆæƒæˆåŠŸåè‡ªåŠ¨è·³è½¬å›åº”ç”¨é¦–é¡µ

### è®¤è¯åŠŸèƒ½è¯´æ˜

å¯ç”¨ Google ç™»å½•åï¼š

- âœ… æ‰€æœ‰ API ç«¯ç‚¹éƒ½éœ€è¦è®¤è¯
- âœ… ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨ JWT token ä¸­
- âœ… Token ä¿å­˜åœ¨ HTTP-only Cookie ä¸­ï¼Œæœ‰æ•ˆæœŸ 24 å°æ—¶
- âœ… å‰ç«¯ä¼šæ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œåç§°
- âœ… æä¾›é€€å‡ºç™»å½•åŠŸèƒ½

### ç¦ç”¨è®¤è¯

å¦‚æœä¸éœ€è¦è®¤è¯åŠŸèƒ½ï¼Œåªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š

```yaml
enable_authentication: false
```

æˆ–ç›´æ¥åˆ é™¤/æ³¨é‡Šæ‰æ‰€æœ‰ Google OAuth ç›¸å…³çš„é…ç½®é¡¹ã€‚åº”ç”¨å°†ä»¥å…¬å¼€æ¨¡å¼è¿è¡Œï¼Œæ— éœ€ç™»å½•å³å¯ä½¿ç”¨ã€‚

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œè¯·æ³¨æ„ï¼š

1. **ä½¿ç”¨ HTTPS**ï¼šç¡®ä¿ä½¿ç”¨ HTTPS åè®®ä¿æŠ¤ç”¨æˆ·æ•°æ®
2. **æ›´æ–°å›è°ƒ URL**ï¼šåœ¨ Google Cloud Console ä¸­æ·»åŠ ç”Ÿäº§ç¯å¢ƒçš„å›è°ƒ URL
3. **é…ç½® CORS**ï¼šå¦‚æœå‰åç«¯åˆ†ç¦»éƒ¨ç½²ï¼Œéœ€è¦æ­£ç¡®é…ç½® CORS
4. **æ›´æ–° JWT Secret**ï¼šä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²ï¼Œä¸è¦ä½¿ç”¨é»˜è®¤å€¼
5. **é…ç½®ç¯å¢ƒå˜é‡**ï¼šå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡è€Œéé…ç½®æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯

### æ‰‹åŠ¨å¯åŠ¨

#### åç«¯å®‰è£…ä¸è¿è¡Œ

1. æ„å»ºé¡¹ç›®ï¼š
```bash
go build -o aiguide ./cmd/aiguide/
```

2. è¿è¡Œåç«¯æœåŠ¡ï¼š
```bash
./aiguide -f cmd/aiguide/aiguide.yaml
```

æˆ–ç›´æ¥è¿è¡Œï¼š
```bash
go run cmd/aiguide/aiguide.go -f cmd/aiguide/aiguide.yaml
```

åç«¯æœåŠ¡å°†å¯åŠ¨åœ¨ `http://localhost:8080`ã€‚

**è¿è¡Œæ¨¡å¼ï¼š**
- **Gin æ¨¡å¼**ï¼ˆæ¨èï¼‰ï¼šå½“é…ç½®æ–‡ä»¶ä¸­ `use_gin: true` æ—¶ï¼Œåç«¯ä½¿ç”¨ Gin æ¡†æ¶æä¾› REST APIï¼Œæä¾›ä»¥ä¸‹ç«¯ç‚¹ï¼š
  - `POST /api/v1/agents/:agentId/sessions/:sessionId` - Agent ä¼šè¯æ¥å£ï¼ˆæ”¯æŒæµå¼å“åº”ï¼‰
  - `GET /health` - å¥åº·æ£€æŸ¥æ¥å£
  - è‡ªåŠ¨æ”¯æŒ CORS è·¨åŸŸè¯·æ±‚
  - é€‚åˆä¸å‰ç«¯ Next.js åº”ç”¨é…åˆä½¿ç”¨

- **ADK æ¨¡å¼**ï¼šå½“é…ç½®æ–‡ä»¶ä¸­ `use_gin: false` æˆ–æœªè®¾ç½®æ—¶ï¼Œä½¿ç”¨ ADK å†…ç½®çš„ Web UI å’Œ APIã€‚

#### å‰ç«¯å®‰è£…ä¸è¿è¡Œ â­ æ–°å¢ Next.js ç•Œé¢

æœ¬é¡¹ç›®ç°åœ¨åŒ…å«ä¸€ä¸ªåŸºäº Next.js çš„ç°ä»£åŒ–å‰ç«¯ç•Œé¢ï¼

1. è¿›å…¥å‰ç«¯ç›®å½•ï¼š
```bash
cd frontend
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

4. è®¿é—®åº”ç”¨ï¼š
æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

**å‰ç«¯ç‰¹æ€§ï¼š**
- ğŸ¨ ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒæš—è‰²æ¨¡å¼
- ğŸ’¬ å®æ—¶æµå¼å¯¹è¯äº¤äº’
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œå®Œç¾æ”¯æŒç§»åŠ¨ç«¯
- âš¡ å¿«é€Ÿã€æµç•…çš„ç”¨æˆ·ä½“éªŒ
- ğŸ—‚ï¸ **ä¼šè¯ç®¡ç†** - ä¿å­˜å’Œåˆ‡æ¢å¤šä¸ªå¯¹è¯ä¼šè¯
  - è‡ªåŠ¨ä¿å­˜æ¯ä¸ªä¼šè¯çš„å¯¹è¯å†å²
  - ä¾§è¾¹æ æ˜¾ç¤ºæ‰€æœ‰ä¼šè¯ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢
  - æ˜¾ç¤ºä¼šè¯åˆ›å»ºæ—¶é—´å’Œæ¶ˆæ¯é¢„è§ˆ
  - æ”¯æŒåˆ›å»ºæ–°ä¼šè¯å’Œåˆ é™¤æ—§ä¼šè¯
  - æ¯ä¸ª AI åŠ©æ‰‹çš„ä¼šè¯ç‹¬ç«‹ç®¡ç†
- ğŸ“ **åŸå§‹å†…å®¹æŸ¥çœ‹** - æŸ¥çœ‹å’Œå¤åˆ¶ AI å›ç­”çš„åŸå§‹ Markdown å†…å®¹ â­ æ–°åŠŸèƒ½
  - æ‚¬åœåœ¨ AI å›ç­”ä¸Šæ—¶æ˜¾ç¤ºæ“ä½œæŒ‰é’®
  - æ”¯æŒåœ¨æ¸²æŸ“æ•ˆæœå’ŒåŸå§‹ Markdown ä¹‹é—´åˆ‡æ¢
  - ä¸€é”®å¤åˆ¶åŸå§‹ Markdown å†…å®¹åˆ°å‰ªè´´æ¿
  - ä¾¿äºè·å–å’Œç¼–è¾‘ AI ç”Ÿæˆçš„å†…å®¹

è¯¦ç»†çš„å‰ç«¯ä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹ [frontend/README.md](frontend/README.md)ã€‚

## ä½¿ç”¨ç¤ºä¾‹

### AI Assistant ä½¿ç”¨ç¤ºä¾‹

AI Assistant æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½åŠ©æ‰‹ï¼Œæ—¢å¯ä»¥è¿›è¡Œä¿¡æ¯æ£€ç´¢ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆå›¾ç‰‡ã€‚

**ä¿¡æ¯æ£€ç´¢ç¤ºä¾‹ï¼š**

```
ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ
```

```
å¸®æˆ‘æœç´¢ä¸€ä¸‹æœ€æ–°çš„äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿
```

**å›¾ç‰‡ç”Ÿæˆç¤ºä¾‹ï¼š**

```
ç”Ÿæˆä¸€å¼ å¯çˆ±çš„å°çŒ«å›¾ç‰‡
```

```
å¸®æˆ‘ç”»ä¸€å¼ æ—¥è½æ—¶åˆ†çš„æµ·æ»©é£æ™¯ç…§ï¼Œè¦æœ‰æ¸©æš–çš„è‰²è°ƒ
```

```
åˆ›å»ºä¸€å¼ æœªæ¥ç§‘å¹»åŸå¸‚çš„å›¾ç‰‡
```

**æ™ºèƒ½ç‰¹æ€§ï¼š**
- âœ… **è‡ªåŠ¨è¯†åˆ«**ï¼šæ ¹æ®ç”¨æˆ·çš„æ˜ç¡®è¦æ±‚è‡ªåŠ¨åˆ¤æ–­æ˜¯æœç´¢ä¿¡æ¯è¿˜æ˜¯ç”Ÿæˆå›¾ç‰‡
- âœ… **æ— éœ€åˆ‡æ¢**ï¼šåœ¨åŒä¸€ä¸ªå¯¹è¯ä¸­æ—¢å¯ä»¥æœç´¢ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆå›¾ç‰‡
- âœ… **ä¸Šä¸‹æ–‡ç†è§£**ï¼šåªæœ‰å½“ç”¨æˆ·ä½¿ç”¨"ç”Ÿæˆ"ã€"ç”»"ã€"åˆ›å»ºå›¾ç‰‡"ç­‰æ˜ç¡®è¡¨è¿°æ—¶æ‰ç”Ÿæˆå›¾ç‰‡
- âœ… **æ­£å¸¸å›å¤**ï¼šå¯¹äºæ™®é€šé—®é¢˜æˆ–è®¨è®ºï¼Œç»§ç»­æä¾›æ–‡å­—å›ç­”

**å›¾ç‰‡ç”ŸæˆåŠŸèƒ½è¯¦ç»†è¯´æ˜ï¼š**

AI åŠ©æ‰‹ä¼šï¼š
1. ç†è§£æ‚¨çš„å›¾ç‰‡éœ€æ±‚
2. å¦‚æœæè¿°è¿‡äºç®€å•ï¼Œä¼šé€‚å½“è¡¥å……ç»†èŠ‚ä»¥ç”Ÿæˆæ›´å¥½çš„å›¾ç‰‡
3. è°ƒç”¨ Google Imagen 3 æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡
4. è¿”å›ç”Ÿæˆçš„å›¾ç‰‡ï¼ˆæ”¯æŒ Base64 æ ¼å¼ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºï¼‰
5. æä¾›å¢å¼ºåçš„æç¤ºè¯ä¾›å‚è€ƒ

**æ”¯æŒçš„å‚æ•°ï¼š**
- **å›¾ç‰‡æè¿°**ï¼šè¯¦ç»†æè¿°å›¾ç‰‡çš„ä¸»ä½“ã€é£æ ¼ã€é¢œè‰²ã€å…‰çº¿ã€æ„å›¾ç­‰
- **å®½é«˜æ¯”**ï¼š1:1ï¼ˆæ­£æ–¹å½¢ï¼‰ã€3:4ï¼ˆç«–å±ï¼‰ã€4:3ï¼ˆæ¨ªå±ï¼‰ã€9:16ï¼ˆæ‰‹æœºç«–å±ï¼‰ã€16:9ï¼ˆå®½å±ï¼‰
- **å›¾ç‰‡æ•°é‡**ï¼š1-4 å¼ 
- **è´Ÿé¢æç¤ºè¯**ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šä¸æƒ³åœ¨å›¾ç‰‡ä¸­å‡ºç°çš„å†…å®¹

## é¡¹ç›®ç»“æ„

```
aiguides/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ aiguide/
â”‚       â”œâ”€â”€ aiguide.go      # åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ aiguide.yaml    # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ logger.go       # æ—¥å¿—é…ç½®
â”œâ”€â”€ frontend/               # Next.js å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx        # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ chat/           # èŠå¤©ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ next.config.ts      # Next.js é…ç½®
â”‚   â””â”€â”€ package.json        # å‰ç«¯ä¾èµ–
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ aiguide/
â”‚   â”‚       â”œâ”€â”€ aiguide.go           # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”‚       â”œâ”€â”€ router.go            # è·¯ç”±é…ç½®
â”‚   â”‚       â”œâ”€â”€ handler.go           # HTTP å¤„ç†å™¨
â”‚   â”‚       â””â”€â”€ agentmanager/
â”‚   â”‚           â”œâ”€â”€ agentmanager.go  # Agent ç®¡ç†å™¨
â”‚   â”‚           â”œâ”€â”€ handler.go       # Agent å¤„ç†å™¨
â”‚   â”‚           â”œâ”€â”€ session.go       # ä¼šè¯ç®¡ç†
â”‚   â”‚           â””â”€â”€ assistant/       # Assistant Agent å®ç°
â”‚   â”‚               â””â”€â”€ assistant.go
â”‚   â””â”€â”€ pkg/
â”‚       â”œâ”€â”€ constant/
â”‚       â”‚   â””â”€â”€ constant.go  # å¸¸é‡å®šä¹‰
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â””â”€â”€ auth.go      # è®¤è¯ç›¸å…³
â”‚       â””â”€â”€ tools/
â”‚           â””â”€â”€ imagegen.go  # å›¾ç‰‡ç”Ÿæˆå·¥å…·
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

## å¼€å‘

### ä»£ç æ ¼å¼åŒ–
```bash
make fmt
```

æˆ–ï¼š
```bash
go fmt ./...
```

### æ·»åŠ æ–°çš„ Agent

è¦æ·»åŠ æ–°çš„ AI åŠ©æ‰‹ï¼Œè¯·å‚è€ƒç°æœ‰çš„ agent å®ç°ï¼ˆå¦‚ `assistant/assistant.go`ï¼‰ï¼Œéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. åœ¨ `internal/app/aiguide/agentmanager/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ agent ç›®å½•
2. å®ç° `NewXXXAgent(model model.LLM, ...)` å‡½æ•°
3. åœ¨ `constant.go` ä¸­æ·»åŠ æ–°çš„ `AppName` å¸¸é‡
4. åœ¨ `agentmanager.go` ä¸­æ·»åŠ  `addXXXRunner()` æ–¹æ³•
5. åœ¨ `New()` å‡½æ•°ä¸­è°ƒç”¨ `addXXXRunner()`

### æ·»åŠ æ–°çš„å·¥å…·

1. åœ¨ `internal/pkg/tools/` ä¸­åˆ›å»ºå·¥å…·æ–‡ä»¶
2. å®šä¹‰è¾“å…¥/è¾“å‡ºç»“æ„ä½“
3. ä½¿ç”¨ `functiontool.New()` åˆ›å»ºå·¥å…·
4. åœ¨ç›¸åº”çš„ä»£ç†é…ç½®ä¸­æ·»åŠ å·¥å…·

**å·²æœ‰å·¥å…·ç¤ºä¾‹ï¼š**
- `imagegen.go` - AI å›¾ç‰‡ç”Ÿæˆå·¥å…·ï¼ˆä½¿ç”¨ Google Imagen 3ï¼‰

### å‰ç«¯å¼€å‘

1. è¿›å…¥å‰ç«¯ç›®å½•ï¼š`cd frontend`
2. å®‰è£…ä¾èµ–ï¼š`npm install`
3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`
4. ä¿®æ”¹ `app/` ç›®å½•ä¸‹çš„ç»„ä»¶å’Œé¡µé¢
5. ä½¿ç”¨ TypeScript ç¡®ä¿ç±»å‹å®‰å…¨
6. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œ React æœ€ä½³å®è·µ

è¯¦ç»†çš„å‰ç«¯å¼€å‘è¯´æ˜è¯·æŸ¥çœ‹ [frontend/README.md](frontend/README.md)ã€‚

## å¸¸è§é—®é¢˜

### å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯ï¼Ÿ

1. ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆé»˜è®¤ç«¯å£ 8080ï¼‰
2. æ£€æŸ¥ `frontend/.env.local` ä¸­çš„ `NEXT_PUBLIC_API_URL` é…ç½®
3. ç¡®è®¤é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢ç«¯å£è®¿é—®

### å¦‚ä½•å–æ¶ˆæ­£åœ¨å¤„ç†çš„è¯·æ±‚ï¼Ÿ

å½“æ‚¨æƒ³è¦åœæ­¢ AI çš„å›å¤æ—¶ï¼š

1. å‘é€æ¶ˆæ¯åï¼Œæäº¤æŒ‰é’®ä¼šå˜æˆçº¢è‰²çš„å–æ¶ˆæŒ‰é’®ï¼ˆX å›¾æ ‡ï¼‰
2. ç‚¹å‡»å–æ¶ˆæŒ‰é’®å³å¯ä¸­æ­¢æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚
3. **åŠŸèƒ½ç‰¹ç‚¹**ï¼š
   - å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å–æ¶ˆï¼Œæ²¡æœ‰æ—¶é—´é™åˆ¶
   - å³ä½¿ AI æ­£åœ¨ç”Ÿæˆå›å¤ä¹Ÿå¯ä»¥å–æ¶ˆ
   - å–æ¶ˆåä¼šåœæ­¢AIç»§ç»­ç”Ÿæˆå†…å®¹
   - å·²ç”Ÿæˆçš„æ¶ˆæ¯ä¼šä¿ç•™åœ¨ä¼šè¯ä¸­

**ä½¿ç”¨åœºæ™¯ï¼š**
- AI ç”Ÿæˆçš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œæƒ³é‡æ–°æé—®
- æƒ³è¦åœæ­¢è¿‡é•¿çš„å›å¤
- å‘ç°æé—®æ–¹å¼éœ€è¦è°ƒæ•´

## æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**ï¼š
  - Google ADK (Agent Development Kit) - AI Agent æ¡†æ¶
  - Gin - HTTP Web æ¡†æ¶ï¼ˆç”¨äºæä¾› REST APIï¼‰
  - SQLite - ä¼šè¯æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- **AI æ¨¡å‹**ï¼šGoogle Gemini, Google Imagen 3
- **è¯­è¨€**ï¼šGo 1.25.5
- **å‰ç«¯**ï¼šNext.js 16, React 19, TypeScript, Tailwind CSS
- **å·¥å…·**ï¼šgoogle_search, ImageGenï¼ˆAI å›¾ç‰‡ç”Ÿæˆï¼‰

## API æ¥å£

å½“ä½¿ç”¨ Gin æ¨¡å¼ï¼ˆ`use_gin: true`ï¼‰æ—¶ï¼Œåç«¯æä¾›ä»¥ä¸‹ REST APIï¼š

### èŠå¤©æ¥å£

#### POST /api/assistant/chats/:sessionId

ä¸ Assistant Agent è¿›è¡Œå¯¹è¯ã€‚

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```bash
curl -X POST http://localhost:8080/api/assistant/chats/session-123 \
  -H "Content-Type: application/json" \
  -d '{"user_id": "user-123", "session_id": "session-123", "message": "ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ"}'
```

**å“åº”æ ¼å¼ï¼š**
Server-Sent Events (SSE) æµå¼å“åº”ï¼š
```
data: {"content":"é‡å­è®¡ç®—æ˜¯..."}
data: {"content":"åŸºäºé‡å­åŠ›å­¦..."}
event: stop
data: {"status":"done"}
```

### ä¼šè¯ç®¡ç†æ¥å£

#### GET /api/:agentId/sessions

è·å–æŒ‡å®šç”¨æˆ·åœ¨è¯¥ Agent ä¸‹çš„æ‰€æœ‰ä¼šè¯åˆ—è¡¨ã€‚

**è¯·æ±‚å‚æ•°ï¼š**
- `user_id` (query, required): ç”¨æˆ· ID

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```bash
curl http://localhost:8080/api/assistant/sessions?user_id=user-123
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
[
  {
    "session_id": "session-20260101-120000-abc123",
    "app_name": "assistant",
    "user_id": "user-123",
    "last_update_time": "2026-01-01T12:30:00Z",
    "message_count": 5,
    "first_message": "ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ"
  }
]
```

#### GET /api/:agentId/sessions/:sessionId/history

è·å–æŒ‡å®šä¼šè¯çš„å®Œæ•´å¯¹è¯å†å²ã€‚

**è¯·æ±‚å‚æ•°ï¼š**
- `user_id` (query, required): ç”¨æˆ· ID

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```bash
curl http://localhost:8080/api/assistant/sessions/session-123/history?user_id=user-123
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "session_id": "session-123",
  "app_name": "assistant",
  "user_id": "user-123",
  "messages": [
    {
      "id": "msg-1",
      "timestamp": "2026-01-01T12:00:00Z",
      "role": "user",
      "content": "ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ"
    },
    {
      "id": "msg-2",
      "timestamp": "2026-01-01T12:00:05Z",
      "role": "assistant",
      "content": "é‡å­è®¡ç®—æ˜¯ä¸€ç§åˆ©ç”¨é‡å­åŠ›å­¦åŸç†è¿›è¡Œä¿¡æ¯å¤„ç†çš„è®¡ç®—æ–¹å¼..."
    }
  ]
}
```

#### POST /api/:agentId/sessions

åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚

**è¯·æ±‚ä½“ï¼š**
```json
{
  "user_id": "user-123"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "session_id": "session-20260101-120000-abc123",
  "created_at": "2026-01-01T12:00:00Z"
}
```

#### DELETE /api/:agentId/sessions/:sessionId

åˆ é™¤æŒ‡å®šçš„ä¼šè¯åŠå…¶æ‰€æœ‰å†å²è®°å½•ã€‚

**è¯·æ±‚å‚æ•°ï¼š**
- `user_id` (query, required): ç”¨æˆ· ID

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```bash
curl -X DELETE http://localhost:8080/api/assistant/sessions/session-123?user_id=user-123
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "message": "session deleted successfully"
}
```

## è®¸å¯è¯

è¯·å‚è€ƒé¡¹ç›® LICENSE æ–‡ä»¶ã€‚
